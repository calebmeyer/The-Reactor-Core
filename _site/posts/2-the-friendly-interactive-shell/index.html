<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>The Reactor Core</title>
        <style media="screen">
            /* note: not actually a sass file, just using that for syntax highlighting */

/*
 * main green: #d3fc05
 */

body {
    background: #101010;
    color: #c8d1b8;
    font-family: gitan-latin; Tahoma, Verdana, sans-serif;
    font-size: 20px;
    line-height: 1.6;
    padding: 50px;
}

/* light color scheme: https://coolors.co/d3fc05-2b303a-f6f7eb-3abecf-7c7c7c */
body.light {
    background: #f6f7eb;
    color: #2B303A;
}

/* Thanks llogiq for the style inspiration! */
.wrapper {
    width: 860px;
    margin: 0 auto;
}

@media print, screen and (max-width: 960px) {
    div.wrapper {
        width: auto;
        margin: 0;
    }
}

@media print, screen and (max-width: 720px) {
    body {
        word-wrap: break-word;
    }

    pre, code {
        word-wrap: normal;
    }
}

@media print, screen and (max-width: 480px) {
    body {
        padding: 15px;
    }

    h1 {
        font-size: 20pt;
    }

    h2 {
        font-size: 16pt;
    }

    h3 {
        font-size: 14pt;
    }
}

@media print {
    body {
        padding: 0.4in;
        font-size: 12pt;
        color: #444;
    }
}

a {
    transition: text-shadow 0.5s;
    color: #d6f1fc;
}

body.light a {
    color: #3abecf;
}

a:hover {
    text-shadow: 0 0 10px #a9cc66;
}

body.light a:hover {
    text-shadow: 0 0 10px #3abecf;
}

pre {
    background: #1D1F21;
    border: 1px solid #5C5C5C;
    border-radius: 5px;
}
code {
    background: #1D1F21;
    color: #0088FF;
    font-family: "Source Code Pro", monospace;
}
blockquote {
    background: #1D1F21;
    border-left: 3px solid #d3fc05;
}

body.light pre {
    background: #f6f7eb;
    color: #2B303A;
}

body.light blockquote {
    background: #f6f7eb;
    color: #2B303A;
    border-left: 3px solid #95f3ff;
}

body.light code {
    background: #f6f7eb;
    color: #3abecf;
}
body.light code.hljs {
    background: #1d1f21;
    color: #b6ced8;
}

blockquote > p {
    padding-bottom: 0.5em;
}
table {
    margin: 1em auto;
    border-collapse: collapse;
}
table, th, td {
    border: 1px solid #5C5C5C;
}
tr:hover {
    background: #1D1F21;
}
th {
    background: #1D1F21;
}
body.light tr:hover, body.light th {
    background: #f6f7eb;
}

small {
    /* slightly faded and dimmed version of the body text color */
    color: #a4a5a2;
}

body.light small {
    color: #404752;
}

header a, h1, h2, h3, h4, h5, h6 {
    font-family: Tahoma, Verdana, sans-serif;
}

.site-title-wrapper {
    width: 400px;
    display: inline-block;
}
.site-title {
    margin: 0;
}
.site-title a, .glow {
    color: #d3fc05;
    text-decoration: none;
    animation-name: radiate;
    animation-duration: 5s;
    animation-timing-function: ease-out;
    animation-iteration-count: infinite;
}

body.light .site-title a, body.light .glow {
    color: #3abecf;
    animation-name: radiate-light;
}

@keyframes radiate {
    0% { text-shadow: 0 0 2px #a9cc66; }
    50% { text-shadow: 0 0 30px #a9cc66; color: #f0fc05; }
    100% { text-shadow: 0 0 2px #a9cc66; }
}

@keyframes radiate-light {
    0% { text-shadow: 0 0 2px #95f3ff; }
    50% { text-shadow: 0 0 30px #95f3ff; }
    100% { text-shadow: 0 0 2px #95f3ff; }
}

.nav {
    margin: 10px 0;
    display: inline-block;
    vertical-align: top;
    cursor: pointer;
}

.nav a {
    color: #d3fc05;
    text-decoration: none;
}

body.light .nav a {
    color: #3abecf;
}

.post .content h1 {
    color: #d3fc05;
}
.post .content h2 {
    color: #d3fc05;
}
.post .content h3 {
    color: #d3fc05;
}
.post .content h4 {
    color: #d3fc05;
}
.post .content h5 {
    color: #d3fc05;
}
.post .content h6 {
    color: #d3fc05;
}
.post .title {
    color: #d3fc05;
    margin-bottom: 0;
}
.post .content a:hover {
    color: #d3fc05;
}
.social-link:hover {
    color: #d3fc05;
}
.nav-item-title:hover {
    color: #d3fc05;
}
.tag a:hover {
    color: #d3fc05;
}
.post-preview .title a {
    color: #d3fc05;
}
.content-item a:hover {
    text-decoration: underline;
    color: #d3fc05;
}
.post-list .title {
    color: #d3fc05;
}

.tombstone {
    color: #d3fc05;
}

body.light .post .content h1 {
    color: #3abecf;
}
body.light .post .content h2 {
    color: #3abecf;
}
body.light .post .content h3 {
    color: #3abecf;
}
body.light .post .content h4 {
    color: #3abecf;
}
body.light .post .content h5 {
    color: #3abecf;
}
body.light .post .content h6 {
    color: #3abecf;
}
body.light .post .title {
    color: #3abecf;
    margin-bottom: 0;
}
body.light .post .content a:hover {
    color: #3abecf;
}
body.light .social-link:hover {
    color: #3abecf;
}
body.light .nav-item-title:hover {
    color: #3abecf;
}
body.light .tag a:hover {
    color: #3abecf;
}
body.light .post-preview .title a {
    color: #3abecf;
}
body.light .content-item a:hover {
    text-decoration: underline;
    color: #3abecf;
}
body.light .post-list .title {
    color: #3abecf;
}

body.light .tombstone {
    color: #3abecf;
}

.inline {
    display: inline;
}

blockquote > p {
    margin-left: 10px;
}

.language-shell .hljs-meta {
    user-select: none; /* don't allow users to select $ in shell */
}

img:not([width]) { /* set images to take up the full width, unless I specify a width on them */
    width: 100%;
}

kbd {
	background-color: #444;
	color: #c8d1b8;
	padding: 4px 10px;
	border-radius: 4px;
	border: 3px solid #aaa;
}

            .hljs-comment,
.hljs-quote
{
  color: #456b7c; /* darker version of background */
}

.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion
{
  color: #5dcdfd; /* faded light blue */
}

.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link,
.hljs-subst
{
  color: #35ddff; /* bright aqua */
}

.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition
{
  color: #13CE00; /* verdant green */
}

.hljs-title,
.hljs-section,
.hljs-attribute
{
  color: #96FF00; /* yellow green */
}

.hljs-keyword,
.hljs-selector-tag
{
  color: #1ea8fc; /* cerulean */
}

.hljs
{
  display: block;
  overflow-x: auto;
  background: #19272d;
  color: #b6ced8;
  padding: 0.5em;
  font-family: "Source Code Pro", "Consolas", monospace;
}

.hljs-emphasis
{
  font-style: italic;
}

.hljs-strong
{
  font-weight: bold;
}

        </style>

        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap">
        <link rel="stylesheet" href="https://use.typekit.net/uvh1qwh.css">

        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </head>
    <body class="dark">
        <div class="wrapper">
            <header>
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a href="/">The Reactor Core</a>
                    </h1>
                    <small>Where the engineers hang out</small>
                </div>
                <h2 class="nav">
                    <a href="/about">About</a>
                </h2>
            </header>
            <hr />
            <section class="main-content">
                <div class="post">
    <h2 class="title">2 - The Friendly Interactive Shell</h2>
    <small>Published 2020-04-14</small>
    <div class="content">
        <p>I was at work today explaining to someone how to make a shell alias, and it reminded me of one of the many reasons why I use <a href="https://fishshell.com/">the friendly interactive shell</a>, <code>fish</code>. Before I get too deep into the weeds, I want to clarify one thing. I have no quarrel with bash or zsh or powershell. I think each of them has a lot of strengths, not least the volume of code written for them. With that said, let's talk about terminals and shells.</p>
<h1>Terminal vs Shell</h1>
<p>This is a common confusion among newcomers. In ye olden days, the terminal was a physical device: a machine with a keyboard and screen. The shell is software.</p>
<p>These days, we use general purpose computers, so terminals are typically recreated in software. So today, a terminal (or more accurately, a <em>terminal emulator</em>) is a program that runs a shell. Microsoft has a great <a href="https://devblogs.microsoft.com/commandline/windows-command-line-backgrounder/">series of blog posts</a> about why updating the <a href="https://devblogs.microsoft.com/commandline/introducing-windows-terminal/">windows terminal</a> has been so hard. Other examples of terminals include iTerm2 (macOS only), minTTY (windows only), and xconsole (anywhere that runs X, but mostly linux).</p>
<p>Shells are software that read in lines of commands and arguments and execute those commands. In the beginning, there was only <code>sh</code>, the linux shell. (and <code>ed</code>, but that's a topic for another time). Many people liked <code>sh</code>. At least as many had problems with it. Some of those who had problems with it wrote their own shells. The most popular of those is a shell called <code>bash</code>, for Bourne Again Shell. Bash is literally everywhere. Even <a href="https://blogs.windows.com/windowsdeveloper/2016/03/30/run-bash-on-ubuntu-on-windows/">windows has bash these days!</a>. Bash is like <code>vi</code>, if you're <code>ssh</code>ing somewhere you just expect it to be there. Apple recently made some waves by <a href="https://scriptingosx.com/2019/06/moving-to-zsh/">announcing that they'd be shipping <code>zsh</code></a>, the Z Shell, as their default starting with macOS Catalina.</p>
<h1>RC Files and Aliases</h1>
<p>When you're first learning to use a shell (any shell), you often find that you're typing the same things over and over again. <code>ls -l</code>. <code>sudo vi /etc/hosts</code>. <code>mkdir -p app; cd app</code>. <code>make clean; make; make install</code>. One of the first customizations many people make is defining a shell alias. An alias is just a word that the shell understands as something longer. Aliases will be expanded by your shell into whatever they stand for. They serve a similar function to abbreviations in writing. If you fire up your favorite bash or zsh (I think this works in powershell too, probably not in CMD.exe), you can type</p>
<pre><code class="language-shell">$ alias ll='ls -l'
</code></pre>
<p>and hit enter. If you then type the name of the alias, the shell will run the command it stands for:</p>
<pre><code class="language-shell">$ ll
total 4
drwxr-xr-x 1 Caleb 197121 0 Jan 16 21:34 js_workspace/
drwxr-xr-x 1 Caleb 197121 0 Feb  6 21:03 rust_workspace/
drwxr-xr-x 1 Caleb 197121 0 Sep  9  2019 side_projects/
</code></pre>
<p>You can even put things after the alias and they'll just get tacked on to the end:</p>
<pre><code class="language-shell">$ ll /usr
total 136
drwxr-xr-x 1 Caleb 197121 0 Oct 13  2017 bin/
drwxr-xr-x 1 Caleb 197121 0 Oct 13  2017 lib/
drwxr-xr-x 1 Caleb 197121 0 Oct 13  2017 libexec/
drwxr-xr-x 1 Caleb 197121 0 Oct 13  2017 share/
drwxr-xr-x 1 Caleb 197121 0 Oct 13  2017 ssl/
</code></pre>
<p>This is great until you close the terminal window or exit the shell. The next time you start up, you'll try your brand new alias, and...</p>
<pre><code class="language-shell">$ ll
bash: ll: command not found
</code></pre>
<p>Crap. That's not what we wanted. If you want something to happen every time the shell starts, you can put it in the appropriate .rc file. For bash, that's <code>~/.bashrc</code>. If you put the alias command in there, it's run (silently) when the shell loads. Now you can use it all the time!</p>
<p>Except for right now. If you want to use it right now, you have to do <code>source ~/.bashrc</code>. Just changing what's in that file doesn't automatically re-run it.</p>
<h1>So... What's all this have to do with fish?</h1>
<p>Remember how fish stands for the friendly interactive shell? Aliases are one of the reasons I think it deserves that title. See, in <code>fish</code>, there is a shell built in for <code>alias</code>, and it will work like bash and zsh. If you type</p>
<pre><code class="language-shell">$ alias ll='ls -l'
</code></pre>
<p>then fish will know what you mean and do the right thing. I called <code>alias</code> a shell built in, but that's only half true. <code>alias</code>, like nearly everything else in fish, is a function. If you fire up fish (usually by typing <code>fish</code> at a bash prompt), you can type <code>functions alias</code> to see the definition of <code>alias</code>:</p>
<pre><code class="language-bash"># Defined in /usr/share/fish/functions/alias.fish @ line 1
function alias --description 'Creates a function wrapping a command'
  # all the code here has been elided to keep from overwhelming you
  # just try it!
end
</code></pre>
<p>The most interesting part of this function is at the bottom:</p>
<pre><code class="language-bash">echo &quot;function $name --wraps $wrapped_cmd --description $cmd_string; $prefix $first_word $body \$argv; end&quot; | source
</code></pre>
<p>When you define an alias with fish, it's actually defining a function for you. If you pass <code>-s</code> or <code>--save</code>, it will also persist the function to disk, in <code>~/.config/fish/functions/</code>. Remember how we had to source the function in bash via our bashrc file? Fish does it automatically, and functions are lazily loaded in fish, so you can put one in a file in that functions directory after the shell starts and it will already be available for this and future shells.</p>
<h1>Summary</h1>
<p>This is but one of the thousand small things that fish just gets right. The history is used to auto-suggest things you've typed before, so you often don't have to alias things. For most config, you don't have to touch a config file, since you can type <code>fish_config</code> and get a web based configuration tool that lets you choose colors, prompts, and more. You don't have to install auto-completions (for example for <code>git</code>), since fish will read your man pages to auto-auto-complete. The scripting language is really awesome: it uses <code>and</code> for <code>&amp;&amp;</code>, <code>end</code> instead of <code>fi</code> or <code>esac</code>, and newlines instead of requiring semicolons (though it does support semicolons).</p>
<p>If you've read this far, I hope I've convinced you to give fish a try. You can get it for mac or linux through your package manager, or directly from <a href="https://fishshell.com/">the website</a>. On windows, you can run it via WSL (preferred) or Cygwin. Go fish!</p>

        <span class="tombstone">&#9670;</span>
    </div>
</div>

            </section>
            <footer>
                <!-- TODO: Add some content to my footer -->
            </footer>
        </div>
    </body>
</html>
